function [muPosterior,KPosterior]=GPRTestOnlineTwoClass(Xtrain,Ftrain,Xtest,KinvGPR,lambda,kernelFunc,params)

ntest=size(Xtest,2);
stepsize=2;

%Kinvtrain(1:stepsize,1:stepsize)=eye(stepsize)/(kernelFunc(Xtrain(:,1:stepsize),Xtrain(:,1:stepsize),params)+lambda*lambda*eye(stepsize));

D=KinvGPR*Ftrain';
muPrior=zeros(1,ntest);
muPosterior=zeros(1,ntest);
KPosterior=zeros(ntest,ntest);

for i=stepsize+1:stepsize:ntest
    fprintf('%d...',i);
    nsize=stepsize; idx=i:i+stepsize-1;
    if ntest<i+stepsize-1
        idx=i:ntest;
        nsize=length(idx);        
    end
    Xonline=Xtest(:,idx);
    k=kernelFunc(Xtrain,Xonline,params);
    kappa=kernelFunc(Xonline,Xonline,params)+lambda*lambda*eye(nsize);
    
    muPosterior(idx)=(muPrior(idx)'+k'*D)';
    KPosterior(idx,idx)=
end

end